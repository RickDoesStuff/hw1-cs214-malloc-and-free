# Define the compiler
CC=gcc

# Compiler flags
CFLAGS=-Wall -g

# Define the target executable name
TARGET=memgrind

# List of source files
SOURCES=chunkhead.c chunk.c mymalloc.c memgrind.c

# Default rule to build the program
all: $(TARGET)

# Rule for linking the program
$(TARGET): $(SOURCES:.c=.o)
	$(CC) $(CFLAGS) -o $@ $^

# Rule for compiling source files
%.o: %.c %.h
	$(CC) $(CFLAGS) -c $<

# Special rule for the driver, which might not have a corresponding header file
memgrind.o: memgrind.c
	$(CC) $(CFLAGS) -c $<

# Rule for cleaning up
clean:
	rm -f *.o $(TARGET)

# Dependency rules for object files
chunkhead.o: chunkhead.h
chunk.o: chunk.h
mymalloc.o: mymalloc.h
